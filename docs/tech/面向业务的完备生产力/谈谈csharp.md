---
tags:
    - dotnet
export: true
keys:
    - c#
---
::: info Introduction

对csharp的一些看法。

:::

C#是微软出的一个中间字节码，托管语言(依赖.net 平台)。最初只能在windows上运行，几年前，具备了跨平台能力。微软建立了.Net Foundation 试图摆脱.net 只属于微软，只属于windows的印象，.net 现在非常开放，它使用的是MIT协议。

我是从c++ 开始进入编程世界，后来想学习一门带gc 的托管语言，我不喜欢java(受同事影响)，刚开始学习了kotlin，但是kotlin那时候用的人少，没有写kotlin的机会。后面对c# 感兴趣，我的带gc的托管语言就转向了c#。

一开始，我对c#的印象是非常正面的。机缘巧合之下，c#一再成为我工作中主要使用的语言，我对c#的印象经历一个从正面到负面，最后稳定在可接受状态的一个过程。可接受状态的原因是：
- 我试图成为一个系统级程序员，而c#不是一个系统级编程语言;
- C#本身非常优秀，它有微软的强力支持,它的编程体验极佳。虽然c#不好的地方也很多(我认为)，但在c#的这些应用领域中不容易找到比它好的替代语言。

我主要使用asp.net 写http server。



## 一门内存安全又高性能的语言

最近(2023), 内存安全的热度很高。c# 带gc，它是内存安全的，并且在开发过程中，你不需要为这种安全付出任何代价，另外，又基于微软的强大实力，c#作为gc语言，性能却非常的高。

Rust是默认内存安全的，但是需要遵守一定的规则来编写内存安全的代码，这需要额外的心智负担。

c和c++ 在内存安全上的强制要求很少，相比容易写出内存不安全的代码，写内存安全的代码需要更多的心智负担。

js 或者python 或者 java 也是内存安全的，但是它们没有c#性能高。

c#这种内存安全通常会让程序员忽略资源管理的概念。如果写c#代码的程序员没有资源管理的概念，那么程序会占用更多的资源。new 是安全的，但不应当肆无忌惮的 new，知道new 的代价是必要的，一些没有资源管理概念的c#的程序员，通常写出的程序性能会更低，资源占用会更高。

## 圈子封闭

c# 并不试图让你了解外面的世界，不试图让你成长。微软的圈子是封闭的圈子。C#一开始并不开源。

我有一种感觉，微软的东西试图让使用者变得越来越傻。微软会在它的免费产品中夹杂一堆私货，而让人付钱的一个方式，是降低他的思考(阴谋论？)

对我来说，正确的使用c#的方式，是把它当成一个用完就扔的工具，不需要深入了解c#。

**只**活在微软圈子的程序员，感觉与外部编程世界割裂，例如：任何时候喜欢拖拉拽，不喜欢命令行，

随着.net 的开源和跨平台，圈子封闭的情况有了改善，但这种味道依然在。

## 复杂的语言

复杂不是一件好事。

c#应用广泛，目前(2023)，C#可以写

- windows 桌面:winform MAUI；
- 安卓-IOS-MacOs桌面/客户端程序:MAUI; 
- HttpServer:Asp.net;
- 甚至可以代替Js 利用 webassembly(blazor) 写web前端...

c#有较多的语法特性，作为一个gc语言，它也有许多Native 不gc的特性。

UNIX 哲学艺术之一：做一件事把它做到最好。如果你认同这个，然后再来审视c#，你会发现c#做每件事情，然后每件事情都没有做到最好。C#的每个工作领域都有不相上下甚至是超越的同类替代品。传统桌面 有 electron 和qt,移动端跨平台有 qt Flutter; webserver 有一堆 比如 SpringBoot；而web前端，使用c#不使用js的理由是什么？

**C#做这么多功能，可能是微软想利用c#造一个封闭圈子。**

C# 在做了跨平台之后，又有了生态的割裂。

c#的复杂性意味着，当你使用c#定位你的问题的时候，你面对的是一个非常大的表面积，这使定位问题变得困难，你要花费更多的时间来筛选信息。

c#诱导你使用c#去解决所有的问题，例如现在，使用blazor来写web前端，使用sigalR来代替websocket 实现web双向通信，但这些都是有坑的。微软有抛弃东西的前车之鉴，比如 siverlight,MFC,wpf。你可能会经受住这些 "欺骗"或"诱惑"，你的同事可能不会，你的前人可能不会，你要接手这样的坑。

C++的复杂是出于性能的必要之恶，c#的复杂对开发人员来说则完全没道理。微软想造一个封闭的圈子，让c# 承担了太多东西。

不过，c#有gc兜底和更智能的免费ide工具，怎么写都不会出现大的问题，同时，只关注c#的一个方面也还算可以。

## 风格与大家不同

C#的风格与大家不同 。 `{` 另起一行，变量、函数名的首字母大写。

同时写C#和其它编程语言代码，比如js python c++ 会有混乱的感觉，微软的东西就是和大家不一样，这个真的影响很大。

c#不是一个新的语言，它是一个干快、糙、猛的活的语言，我真的不想写 `;` ...

## 面向对象

> 一坨一坨的。

面向对象的目的是试图建立一个适合业务需求的对象模型，但每个人的需求都不一样，所以糊来糊去，就一层包着一层，各种乱七八糟的class 。 新出的语言似乎都不喜欢面向对象范式，比如go rust zig。


## 总结

c#对我而言更适合写关注功能和业务，而几乎不关注性能和资源占用的应用，web server 就是一个很好的场景，cpu性能总是够用的。

微软实力强大，它出的东西就是有更好的质量；同时微软想造一个封闭的圈子，然后让你呆在里面，你在这个圈子里待多了出去后，就会不适应;如果在这个圈子里能解决所有问题，那么也很好，但是微软并不能打败全世界，你需要走出去，然后就会不适应。相对的，你从外面的圈子进入微软的圈子，会发现这里"与众不同"，不仅是编程语言和工具，还有程序员。

很多人不喜欢微软，不知道是不是这个原因。

回到c#，它质量很高，但是微软的私货也不少。现在微软和.net 越来越开放，vscode 或者 .net 的MIT开源协议，我们能看到明显的转变，这种转变也造成了与之前封闭.net世界的一些割裂。

我是看好.net 和c# 的未来的，微软从开放中赚到了钱,它们会越来越开放。
